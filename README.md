# Описание проекта: YaMDb

Проект YaMDb предназначен для сбора отзывов пользователей о различных произведениях. Произведения разделены на категории, такие как "Книги," "Фильмы," и "Музыка." Добавлять произведения, категории и жанры могут только администраторы.

Благодарные или недовольные пользователи могут оставлять текстовые отзывы к произведениям и ставить им оценки по шкале от одного до десяти (целые числа). Эти пользовательские оценки используются для расчета средней оценки произведения, также известной как рейтинг (целое число). Каждый пользователь может оставить только один отзыв на произведение. Пользователи также могут оставлять комментарии к отзывам.

Добавлять отзывы, комментарии и ставить оценки могут только аутентифицированные пользователи.

# Содержание

- [Описание проекта: YaMDb](#описание-проекта-yamdb)
- [Техническое описание: YaMDb Project](#техническое-описание-проекта-yamdb)
- [Ресурсы API YaMDb](#ресурсы-api-yamdb)
- [Пользовательские роли и права доступа](#пользовательские-роли-и-права-доступа)
- [Самостоятельная регистрация новых пользователей](#самостоятельная-регистрация-новых-пользователей)
- [Создание пользователя администратором](#создание-пользователя-администратором)
- [Установка проекта на ваш компьютер](#установка-проекта-на-ваш-компьютер)

## Техническое описание: проект YaMDb

Документация будущего API будет доступна по адресу [http://127.0.0.1:8000/redoc/](http://127.0.0.1:8000/redoc/).

## Ресурсы API YaMDb

- Ресурс **auth**: аутентификация.
- Ресурс **users**: пользователи.
- Ресурс **titles**: произведения, к которым пишут отзывы (определённый фильм, книга или песенка).
- Ресурс **categories**: категории (типы) произведений ("Фильмы", "Книги", "Музыка"). Одно произведение может быть привязано только к одной категории.
- Ресурс **genres**: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.
- Ресурс **reviews**: отзывы на произведения. Отзыв привязан к определённому произведению.
- Ресурс **comments**: комментарии к отзывам. Комментарий привязан к определённому отзыву.

Каждый ресурс описан в документации: указаны эндпоинты (адреса, по которым можно сделать запрос), разрешённые типы запросов, права доступа и дополнительные параметры, когда это необходимо.

## Пользовательские роли и права доступа

- **Анонимный пользователь**: Может просматривать описания произведений, читать отзывы и комментарии.
    
- **Аутентифицированный пользователь (user)**: Помимо прав анонимного пользователя, может публиковать отзывы и ставить оценки произведениям (фильмам/книгам/песенкам). Также может комментировать отзывы. Имеет возможность редактировать и удалять свои отзывы и комментарии, а также изменять свои оценки произведений. Эта роль назначается автоматически каждому новому пользователю.
    
- **Модератор (moderator)**: Обладает всеми правами аутентифицированного пользователя. Дополнительно имеет право удалять и редактировать любые отзывы и комментарии.
    
- **Администратор (admin)**: Полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Также может назначать роли пользователям.
    

Суперюзер Django всегда обладает правами администратора, то есть роли `admin`. Даже если изменить роль суперюзера, он всё равно сохранит права администратора. Таким образом, суперюзер всегда является администратором, но администратор не обязательно является суперюзером.

## Самостоятельная регистрация новых пользователей

1. Пользователь отправляет POST-запрос с email и username на `/api/v1/auth/signup/`.
2. YaMDB отправляет письмо с confirmation_code на указанный email.
3. Пользователь отправляет POST-запрос с username и confirmation_code на `/api/v1/auth/token/` и получает JWT-токен.
4. С этим токеном пользователь может работать с API, включая его в каждый запрос.
5. После регистрации и получения токена, пользователь может PATCH-запросом обновить свой профиль на `/api/v1/users/me/` (детали в документации).

## Создание пользователя администратором

1. Администратор создает пользователей через админ-зону сайта или POST-запросом на `/api/v1/users/`.
2. При создании пользователя не происходит автоматической отправки письма с кодом подтверждения.
3. Пользователь самостоятельно отправляет email и username на `/api/v1/auth/signup/` и получает письмо с confirmation_code.
4. После этого отправляется POST-запрос с username и confirmation_code на `/api/v1/auth/token/` для получения JWT-токена, аналогично самостоятельной регистрации.

## Установка проекта на ваш компьютер

1. Клонировать репозиторий и перейти в него в командной строке:

    ```shell
    git clone git@github.com:myslin12/api_yamdb.git
    cd api_yamdb
    ```

2. Создать и активировать виртуальное окружение:

    ```shell
    python -m venv venv
    source venv/Scripts/activate
    ```

3. Установить зависимости из файла requirements.txt:

    ```shell
    pip install -r requirements.txt
    ```

4. Создать и выполнить миграции:

    ```shell
    python3 manage.py makemigrations
    python3 manage.py migrate
    ```

5. Ипортировать данные (опционально):

    ```shell
    python3 manage.py load_csv
    ```

6. Запустить проект:

    ```shell
    python3 manage.py runserver
    ```
